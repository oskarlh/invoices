(this.webpackJsonpinvoices=this.webpackJsonpinvoices||[]).push([[0],[,,,,,,,,,,function(e,n,t){e.exports={container:"styles_container__2CYxk",controlsCell:"styles_controlsCell__2thno",controlsLink:"styles_controlsLink__QBm9Y",table:"styles_table__19dST"}},,,function(e,n,t){e.exports={table:"styles_table__3ShGV",activeColumnHeading:"styles_activeColumnHeading__3jYNk"}},function(e,n,t){e.exports={container:"styles_container__1rgTU",labelText:"styles_labelText__faqcr",textarea:"styles_textarea__2B0aT"}},function(e,n,t){e.exports={menu:"styles_menu__3pfnh",link:"styles_link__DZOza",activeLink:"styles_activeLink__22bo6"}},,function(e,n,t){e.exports={container:"styles_container__yyfEU",input:"styles_input__1pBaB"}},function(e,n,t){e.exports={link:"styles_link__22rl5",activeLink:"styles_activeLink__3Vxrn"}},function(e,n,t){e.exports={header:"styles_header__3GNOB",logo:"styles_logo__3vo9k"}},function(e,n,t){e.exports={app:"styles_app__2kGhL",headerAndMenu:"styles_headerAndMenu__KiQ_A"}},,,,function(e,n,t){e.exports={button:"styles_button__2SJjC"}},,function(e,n,t){e.exports={themeProvider:"ThemeProvider_themeProvider__1hUB0"}},function(e,n,t){e.exports=t.p+"static/media/logo.29e71b12.svg"},function(e,n,t){e.exports={table:"styles_table__EKXfk"}},function(e,n,t){e.exports={container:"styles_container__1Ddpw"}},function(e,n,t){e.exports={main:"styles_main__EEBhq",pageContainer:"styles_pageContainer__3cBXU"}},function(e,n,t){e.exports=t(44)},,,,,,,,,,,,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(23),c=t.n(i),o=t(1),l=["en","sv"],u={edit:{en:"Edit",sv:"Redigera"},"invoicing/app name":{en:"Invoicing App 1.0",sv:"Faktureringsapp 1.0"},"invoicing/choose currency":{en:"Choose currency:",sv:"V\xe4lj valuta:"},"invoicing/create invoice":{en:"Create invoice",sv:"Skapa faktura"},"invoicing/due date":{en:"Due date",sv:"F\xf6rfallodatum"},"invoicing/email invoice":{en:"Send email",sv:"Skicka e-postmeddelande"},"invoicing/email sent to":{en:"Invoice sent to ",sv:"Faktura skickad till "},"invoicing/email to":{en:"Email to",sv:"E-posta till"},"invoicing/invoices":{en:"Invoices",sv:"Fakturor"},"invoicing/item description":{en:"Description",sv:"Beskrivning"},"invoicing/notes":{en:"Notes/instructions",sv:"Anteckningar/anvisningar"},"invoicing/overdue":{en:"Overdue",sv:"F\xf6rsenad"},"invoicing/page not found":{en:"Page not found",sv:"Sidan kunde inte hittas"},"invoicing/paid":{en:"Paid",sv:"Betald"},"invoicing/price per item":{en:"Unit price",sv:"\xc1-pris"},"invoicing/save changes":{en:"Save changes",sv:"Spara \xe4ndringar"},"invoicing/title":{en:"Title",sv:"Titel"},"invoicing/total":{en:"Total",sv:"Att betala"},loading:{en:"Loading...",sv:"Laddar..."},logo:{en:"Logo",sv:"Logga"},no:{en:"No",sv:"Nej"},quantity:{en:"Quantity",sv:"Antal"},"saving changes":{en:"Saving changes...",sv:"Sparar \xe4ndringar..."},yes:{en:"Yes",sv:"Ja"}},s=Object(a.createContext)("en");s.displayName="I18nContext";var m=s,v=t(16);function d(){var e,n=Object(v.a)(navigator.languages);try{for(n.s();!(e=n.n()).done;){var t,a=e.value,r=Object(v.a)(l);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(a.startsWith(i))return i}}catch(c){r.e(c)}finally{r.f()}}}catch(c){n.e(c)}finally{n.f()}return"en"}function p(e){var n=e.children,t=e.language,i=Object(a.useState)((function(){return d()})),c=Object(o.a)(i,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){var e=function(){u(d())};return globalThis.addEventListener("languagechange",e),function(){return globalThis.removeEventListener("languagechange",e)}}),[]),r.a.createElement(m.Provider,{value:t||l},n)}function f(){var e=Object(a.useContext)(m);return Object(a.useCallback)((function(n){return u[n][e]}),[e])}function g(e){var n=e.label,t=f();return r.a.createElement(r.a.Fragment,null,n&&t(n))}var b=t(8),h=t(13),y=t.n(h);function E(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((function(e){return!!e})).join(" ")}var j=a.memo,O=j((function(e){var n=e.columns,t=e.extraForCells,a=e.row;return r.a.createElement("tr",null,n.map((function(e,n){var i=e.cell,c=e.cellClassName;return r.a.createElement("td",{key:n,className:c},function(){if("function"===typeof i||"object"===typeof i){var e=i;return r.a.createElement(e,{extra:t,row:a})}return String(a[i])}())})))}));var _=j((function(e){var n=e.className,t=e.columns,i=e.extraForCells,c=e.extraForComparators,l=e.extraForHeadings,u=e.rowKey,s=e.rows,m=Object(a.useState)(),v=Object(o.a)(m,2),d=v[0],p=v[1],f=void 0!==d&&d<t.length?t[d]:void 0,g=Object(a.useState)(!1),h=Object(o.a)(g,2),j=h[0],_=h[1],k=Object(a.useMemo)((function(){return s.map((function(e,n){var a=""+n;return"function"===typeof u?a="a"+u(e):void 0!==u&&(a="b"+String(e[u])),r.a.createElement(O,{columns:t,extraForCells:i,key:a,row:e})}))}),[t,i,u,s]),C=null===f||void 0===f?void 0:f.compare,x=Object(a.useMemo)((function(){var e=Object(b.a)(s.keys());return"function"===typeof C?e.sort((function(e,n){return C(s[e],s[n],c)})):C&&e.sort((function(e,n){var t=s[e][C],a=s[n][C];return+(t>a)-+(t<a)})),e}),[C,c,s]),w=Object(a.useMemo)((function(){var e=x.map((function(e){return k[e]}));return j&&e.reverse(),e}),[x,k,j]),N=Object(a.useMemo)((function(){return t.map((function(e,n){var t=void 0===e.compare?void 0:function(){p(f===e&&j?void 0:n),_(f===e)},a=e===f?y.a.activeColumnHeading:"",i="function"===typeof e.heading||"object"===typeof e.heading?r.a.createElement(e.heading,{extra:l}):e.heading;return r.a.createElement("td",{className:a,key:n,onClick:t},i)}))}),[f,t,j,l]);return r.a.createElement("table",{className:E(y.a.table,n)},r.a.createElement("thead",null,r.a.createElement("tr",null,N)),r.a.createElement("tbody",{className:y.a.tableBody},w))})),k=t(24),C=t.n(k);function x(e){var n=e.children,t=e.className,a=e.disabled,i=e.onClick,c=e.type,o=void 0===c?"button":c;return r.a.createElement("button",{className:E(C.a.button,"string"===typeof t&&t),disabled:a,onClick:i,type:o},n)}var w=t(17),N=t.n(w);function S(e){var n=Object.assign({},e),t="string"===typeof n.className?n.className:"";return r.a.createElement("div",{className:N.a.container},r.a.createElement("input",Object.assign({},n,{className:E(N.a.input,t)})))}var I=t(6),P=t(18),F=t.n(P),L=Object(a.memo)((function(e){var n=e.activeClassName,t=e.children,a=e.className,i=e.to;return r.a.createElement(I.a,{getProps:function(e){var t=e.isCurrent;return{className:E(F.a.link,a,t&&F.a.activeLink,t&&n)}},to:i},t)})),D=t(14),M=t.n(D);var T=Object(a.memo)((function(e){var n=e.className,t=e.children,a=e.defaultValue,i=e.name,c=e.onChange,o=e.value;return r.a.createElement("label",{className:M.a.container},r.a.createElement("span",{className:M.a.labelText},t),r.a.createElement("textarea",{className:E(M.a.textarea,n),defaultValue:a,rows:4,name:i,onChange:c?function(e){c(e.target.value)}:void 0,value:o}))})),A=t(26),B=t.n(A);function q(e){var n=e.children;return r.a.createElement("div",{className:B.a.themeProvider},n)}var K=["DKK","EUR","NOK","SEK","TWD","USD"];function V(e,n){return new Intl.NumberFormat(void 0,{currency:n,style:"currency"}).format(e)}var U=Object(a.memo)((function(e){var n=e.currency,t=e.onChange,a=f();return r.a.createElement("div",null,a("invoicing/choose currency")+" ",K.map((function(e){return r.a.createElement(x,{disabled:e===n,key:e,onClick:t?function(){return t(e)}:void 0},e)})))})),J=t(19),R=t.n(J),W=t(27),H=t.n(W);function Y(e){var n=e.className,t=f();return r.a.createElement("header",{className:E(R.a.header,n)},r.a.createElement("img",{src:H.a,className:R.a.logo,alt:t("logo")}),r.a.createElement("h1",null,t("invoicing/app name")))}var G=t(4),Q=t(11),X={description:"",quantity:1,unitPrice:0};var z=Object(a.memo)((function(e){var n=e.extra.onDelete,t=e.row;return r.a.createElement(x,{disabled:t===X,onClick:function(){return n(t)}},r.a.createElement("span",{"aria-label":"Delete",role:"img"},"\u274c"))}));var Z=Object(a.memo)((function(e){var n=e.extra.onValueChange,t=e.invoiceField,a=e.row,i=e.type;return r.a.createElement(S,{type:i,onChange:function(e){n(t,e.target.value,a)},value:a[t]})})),$=t(28),ee=t.n($),ne=[{cell:function(e){return r.a.createElement(Z,Object.assign({invoiceField:"description",type:"text"},e))},compare:"description",heading:function(){return r.a.createElement(g,{label:"invoicing/item description"})}},{cell:function(e){return r.a.createElement(Z,Object.assign({invoiceField:"quantity",type:"number"},e))},heading:function(){return r.a.createElement(g,{label:"quantity"})}},{cell:function(e){return r.a.createElement(Z,Object.assign({invoiceField:"unitPrice",type:"number"},e))},heading:function(){return r.a.createElement(g,{label:"invoicing/price per item"})}},{cell:z}];var te=Object(a.memo)((function(e){var n=e.existingLineItems,t=e.onChange,i=Object(a.useState)((function(){return Object(b.a)(n||[])})),c=Object(o.a)(i,2),l=c[0],u=c[1],s=Object.assign(Object(a.useState)({}),{items:l}),m=Object(a.useCallback)((function(e){var n=s.items.filter((function(n){return n!==e}));u(n),t&&t(n)}),[s,t]),v=Object(a.useCallback)((function(e,n,a){var r=Object(G.a)(Object(G.a)({},a),{},Object(Q.a)({},e,"description"===e?n:Number(n))),i=Object(b.a)(s.items);a===X?i.push(r):i.splice(i.indexOf(a),1,r),u(i),t&&t(i)}),[s,t]),d=Object(a.useMemo)((function(){return{onDelete:m,onValueChange:v}}),[m,v]);return r.a.createElement(_,{className:ee.a.table,columns:ne,extraForCells:d,rows:[].concat(Object(b.a)(l),[X])})})),ae=t(29),re=t.n(ae);var ie=Object(a.memo)((function(e){var n=e.existingInvoice,t=e.onCreate,i=e.onSaveChanges,c=f(),l=Object(a.useState)((null===n||void 0===n?void 0:n.currency)||"SEK"),u=Object(o.a)(l,2),s=u[0],m=u[1],v=Object(a.useState)((null===n||void 0===n?void 0:n.dueDate)||""),d=Object(o.a)(v,2),p=d[0],g=d[1],b=Object(a.useState)((null===n||void 0===n?void 0:n.emailAddress)||""),h=Object(o.a)(b,2),y=h[0],E=h[1],j=Object(a.useState)((null===n||void 0===n?void 0:n.lineItems)||[]),O=Object(o.a)(j,2),_=O[0],k=O[1],C=Object(a.useState)((null===n||void 0===n?void 0:n.notes)||""),w=Object(o.a)(C,2),N=w[0],I=w[1],P=Object(a.useState)(Boolean(null===n||void 0===n?void 0:n.paid)),F=Object(o.a)(P,2),L=F[0],D=F[1],M=Object(a.useState)((null===n||void 0===n?void 0:n.title)||""),A=Object(o.a)(M,2),B=A[0],q=A[1],K=Object(a.useMemo)((function(){return(_||[]).reduce((function(e,n){return e+n.quantity*n.unitPrice}),0)}),[_]),J=Object(a.useCallback)((function(e){e.preventDefault();var a={currency:s,dueDate:p,emailAddress:y,lineItems:_,notes:N,paid:L,title:B};n?i&&i(Object(G.a)({id:n.id},a)):t&&t(a)}),[s,p,y,n,_,N,t,i,L,B]),R=Object(a.useCallback)((function(){globalThis.alert(c("invoicing/email sent to")+y)}),[y,c]);return r.a.createElement("section",{className:re.a.container},r.a.createElement("form",{onSubmit:J},r.a.createElement("p",null,r.a.createElement(x,{type:"submit"},c(n?"invoicing/save changes":"invoicing/create invoice")),r.a.createElement(x,{disabled:!y,onClick:R},c("invoicing/email invoice"))," "+c("invoicing/total")+": "+V(K,s)+" ",r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:L,onChange:function(e){D(e.target.checked)}}),c("invoicing/paid"))),r.a.createElement(S,{type:"text",placeholder:c("invoicing/title"),value:B,onChange:function(e){q(e.target.value)},required:!0}),r.a.createElement(S,{type:"email",placeholder:c("invoicing/email to"),value:y,onChange:function(e){E(e.target.value)}}),r.a.createElement(S,{type:"date",title:c("invoicing/due date"),value:p,onChange:function(e){g(e.target.value)},required:!0}),r.a.createElement(T,{value:N,onChange:I},c("invoicing/notes")),r.a.createElement(U,{currency:s,onChange:m}),r.a.createElement(te,{existingLineItems:null===n||void 0===n?void 0:n.lineItems,onChange:k})))})),ce=t(10),oe=t.n(ce);var le=[{cell:function(e){var n=e.row.paid;return r.a.createElement(g,{label:n?"yes":"no"})},compare:"paid",heading:function(){return r.a.createElement(g,{label:"invoicing/paid"})}},{cell:"title",compare:"title",heading:function(){return r.a.createElement(g,{label:"invoicing/title"})}},{cell:"emailAddress",compare:"emailAddress",heading:function(){return r.a.createElement(g,{label:"invoicing/email to"})}},{cell:function(e){var n=e.row,t=n.dueDate,a=n.paid,i=f()("invoicing/overdue"),c=!a&&new Date(t).getTime()>=Date.now();return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("span",{"aria-label":i,role:"img"},"\u26a0\ufe0f"),t)},compare:"dueDate",heading:function(){return r.a.createElement(g,{label:"invoicing/due date"})}},{cell:function(e){var n=e.row,t=n.currency,a=n.lineItems.reduce((function(e,n){return e+n.quantity*n.unitPrice}),0);return r.a.createElement(r.a.Fragment,null,V(a,t))},compare:"currency",heading:function(){return r.a.createElement(g,{label:"invoicing/total"})}},{cell:function(e){var n=e.row.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{className:oe.a.controlsLink,to:"edit/"+n},r.a.createElement(g,{label:"edit"})))},cellClassName:oe.a.controlsCell}];var ue=Object(a.memo)((function(e){var n=e.invoices;return r.a.createElement("div",{className:oe.a.container},r.a.createElement(_,{className:oe.a.table,columns:le,rows:n,rowKey:"id"}))}));var se=t(2),me=t.n(se),ve=t(3),de={invoices:[{currency:"SEK",dueDate:"2020-10-20",emailAddress:"julia@example.com",id:451,lineItems:[{description:"Potatoes",quantity:100,unitPrice:2.5}],notes:"Julia bought 100 potatoes. Time to pay.",paid:!1,title:"Purchase of 100 potatoes"},{currency:"EUR",dueDate:"2020-04-12",emailAddress:"marko@example.com",id:123,lineItems:[{description:"Car, Volvo",quantity:1,unitPrice:25e4},{description:"Router, MikroTik",quantity:2,unitPrice:12012}],notes:"I should probably write payment instructions here...",paid:!1,title:"Car & Router"}],modelVersion:1,nextId:20380451};function pe(){var e=localStorage.getItem("invoicing"),n=e?JSON.parse(e):null;return n&&1===n.modelVersion?n:de}function fe(e){localStorage.setItem("invoicing",JSON.stringify(e))}function ge(e){return be.apply(this,arguments)}function be(){return(be=Object(ve.a)(me.a.mark((function e(n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe()[n]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,n){return ye.apply(this,arguments)}function ye(){return(ye=Object(ve.a)(me.a.mark((function e(n,t){var a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=pe()[n].find((function(e){return e.id===t}))){e.next=3;break}throw new Error("Item not found");case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,n){return je.apply(this,arguments)}function je(){return(je=Object(ve.a)(me.a.mark((function e(n,t){var a,r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pe(),r=Object(G.a)(Object(G.a)({},t),{},{id:a.nextId++}),a[n].push(r),fe(a),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,n){return _e.apply(this,arguments)}function _e(){return(_e=Object(ve.a)(me.a.mark((function e(n,t){var a,r,i;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=pe(),r=a[n],i=r.find((function(e){return e.id===t.id}))){e.next=5;break}throw new Error("Item not found");case 5:return Object.assign(i,t),fe(a),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(ve.a)(me.a.mark((function e(n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he("invoices",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return xe.apply(this,arguments)}function xe(){return(xe=Object(ve.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ge("invoices"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Object(ve.a)(me.a.mark((function e(n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee("invoices",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){return(Ne=Object(ve.a)(me.a.mark((function e(n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oe("invoices",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Se=t(12),Ie=t.n(Se);var Pe=[{Component:function(e){var n=f();return r.a.createElement("div",null,n("invoicing/page not found"))},defaultRoute:!0,routingPath:"404"},{Component:function(e){var n=Ie()(Ce,[]),t=Object(o.a)(n,2),a=t[0],i=t[1];return i?r.a.createElement(r.a.Fragment,null,""+i):r.a.createElement(ue,{invoices:a||[]})},navMenuLabel:"invoicing/invoices",navMenuLinkPath:"/",routingPath:"/"},{Component:function(e){var n=Object(a.useState)(),t=Object(o.a)(n,2),i=t[0],c=t[1],l=Object(a.useState)(!1),u=Object(o.a)(l,2),s=u[0],m=u[1],v=Object(a.useCallback)((function(e){m(!0),function(e){return we.apply(this,arguments)}(e).then((function(){Fe("/")})).catch((function(e){c(String(e))}))}),[]);return i?r.a.createElement(r.a.Fragment,null,i):s?r.a.createElement(g,{label:"saving changes"}):r.a.createElement(ie,{onCreate:v})},navMenuLabel:"invoicing/create invoice",navMenuLinkPath:"/create",routingPath:"/create"},{Component:function(e){var n=e.invoiceId,t=Number(n),i=Ie()((function(){return function(e){return ke.apply(this,arguments)}(t)}),[t]),c=Object(o.a)(i,2),l=c[0],u=c[1],s=Object(a.useState)(),m=Object(o.a)(s,2),v=m[0],d=m[1],p=Object(a.useState)(!1),f=Object(o.a)(p,2),b=f[0],h=f[1],y=Object(a.useCallback)((function(e){h(!0),function(e){return Ne.apply(this,arguments)}(e).then((function(){Fe("/")})).catch((function(e){d(String(e))}))}),[]);return u||v?r.a.createElement(r.a.Fragment,null,String(u||v)):!l||b?r.a.createElement(g,{label:"loading"}):u?r.a.createElement(r.a.Fragment,null,""+u):r.a.createElement(ie,{existingInvoice:l,onSaveChanges:y})},routingPath:"/edit/:invoiceId"}];function Fe(e){Object(I.c)(e.startsWith("/")?"/invoices"+e:e)}var Le=t(30),De=t.n(Le);var Me=Object(a.memo)((function(e){var n=e.className;return r.a.createElement("main",{className:E(De.a.main,n)},r.a.createElement(I.b,{basepath:"/invoices"},Pe.map((function(e,n){var t=e.Component,a=e.defaultRoute,i=e.routingPath;return r.a.createElement(t,{key:n,default:a,path:i})}))))})),Te=t(15),Ae=t.n(Te);var Be=Object(a.memo)((function(e){var n=e.className,t=f();return r.a.createElement("nav",{className:E(Ae.a.menu,n)},r.a.createElement("ul",null,Pe.map((function(e,n){var a=e.navMenuLabel,i=e.navMenuLinkPath;return a&&i&&r.a.createElement("li",{key:n},r.a.createElement(L,{activeClassName:Ae.a.activeLink,className:Ae.a.link,to:"/invoices"+i},t(a)))}))))})),qe=t(20),Ke=t.n(qe);var Ve=function(){return r.a.createElement(p,null,r.a.createElement(q,null,r.a.createElement("div",{className:Ke.a.app},r.a.createElement("div",{className:Ke.a.headerAndMenu},r.a.createElement(Y,null),r.a.createElement(Be,null)),r.a.createElement(Me,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(43);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[31,1,2]]]);
//# sourceMappingURL=main.2df3d9e6.chunk.js.map
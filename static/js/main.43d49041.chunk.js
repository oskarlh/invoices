(this.webpackJsonpinvoices=this.webpackJsonpinvoices||[]).push([[0],[,,,,,,,,,function(e,n,t){e.exports={container:"styles_container__2CYxk",controlsCell:"styles_controlsCell__2thno",controlsLink:"styles_controlsLink__QBm9Y",table:"styles_table__19dST"}},,function(e,n,t){e.exports={table:"styles_table__3ShGV",activeColumnHeading:"styles_activeColumnHeading__3jYNk"}},function(e,n,t){e.exports={container:"styles_container__1rgTU",labelText:"styles_labelText__faqcr",textarea:"styles_textarea__2B0aT"}},function(e,n,t){e.exports={menu:"styles_menu__3pfnh",link:"styles_link__DZOza",activeLink:"styles_activeLink__22bo6"}},,,function(e,n,t){e.exports={container:"styles_container__yyfEU",input:"styles_input__1pBaB"}},function(e,n,t){e.exports={link:"styles_link__22rl5",activeLink:"styles_activeLink__3Vxrn"}},function(e,n,t){e.exports={header:"styles_header__3GNOB",logo:"styles_logo__3vo9k"}},function(e,n,t){e.exports={app:"styles_app__2kGhL",headerAndMenu:"styles_headerAndMenu__KiQ_A"}},,,,function(e,n,t){e.exports={button:"styles_button__2SJjC"}},,function(e,n,t){e.exports={themeProvider:"ThemeProvider_themeProvider__1hUB0"}},function(e,n,t){e.exports=t.p+"static/media/logo.29e71b12.svg"},function(e,n,t){e.exports={table:"styles_table__EKXfk"}},function(e,n,t){e.exports={container:"styles_container__1Ddpw"}},function(e,n,t){e.exports={main:"styles_main__EEBhq",pageContainer:"styles_pageContainer__3cBXU"}},function(e,n,t){e.exports=t(43)},,,,,,,,,,,,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(22),c=t.n(i),o=t(1),l=["en","sv"],u={edit:{en:"Edit",sv:"Redigera"},"invoicing/app name":{en:"Invoicing App 1.0",sv:"Faktureringsapp 1.0"},"invoicing/choose currency":{en:"Choose currency:",sv:"V\xe4lj valuta:"},"invoicing/create invoice":{en:"Create invoice",sv:"Skapa faktura"},"invoicing/due date":{en:"Due date",sv:"F\xf6rfallodatum"},"invoicing/email invoice":{en:"Send email",sv:"Skicka e-postmeddelande"},"invoicing/email sent to":{en:"Invoice sent to ",sv:"Faktura skickad till "},"invoicing/email to":{en:"Email to",sv:"E-posta till"},"invoicing/invoices":{en:"Invoices",sv:"Fakturor"},"invoicing/item description":{en:"Description",sv:"Beskrivning"},"invoicing/notes":{en:"Notes/instructions",sv:"Anteckningar/anvisningar"},"invoicing/page not found":{en:"Page not found",sv:"Sidan kunde inte hittas"},"invoicing/paid":{en:"Paid",sv:"Betald"},"invoicing/price per item":{en:"Unit price",sv:"\xc1-pris"},"invoicing/save changes":{en:"Save changes",sv:"Spara \xe4ndringar"},"invoicing/title":{en:"Title",sv:"Titel"},"invoicing/total":{en:"Total",sv:"Att betala"},loading:{en:"Loading...",sv:"Laddar..."},logo:{en:"Logo",sv:"Logga"},no:{en:"No",sv:"Nej"},quantity:{en:"Quantity",sv:"Antal"},"saving changes":{en:"Saving changes...",sv:"Sparar \xe4ndringar..."},yes:{en:"Yes",sv:"Ja"}},s=Object(a.createContext)("en");s.displayName="I18nContext";var v=s,m=t(15);function d(){var e,n=Object(m.a)(navigator.languages);try{for(n.s();!(e=n.n()).done;){var t,a=e.value,r=Object(m.a)(l);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(a.startsWith(i))return i}}catch(c){r.e(c)}finally{r.f()}}}catch(c){n.e(c)}finally{n.f()}return"en"}function f(e){var n=e.children,t=e.language,i=Object(a.useState)((function(){return d()})),c=Object(o.a)(i,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){var e=function(){u(d())};return globalThis.addEventListener("languagechange",e),function(){return globalThis.removeEventListener("languagechange",e)}}),[]),r.a.createElement(v.Provider,{value:t||l},n)}function p(){var e=Object(a.useContext)(v);return Object(a.useCallback)((function(n){return u[n][e]}),[e])}function g(e){var n=e.label,t=p();return r.a.createElement(r.a.Fragment,null,n&&t(n))}var b=t(11),h=t.n(b);function y(e,n,t){var a=t;if(void 0!==n){var r=e[n];(r||""===r||0===r)&&(a="u"+e[n])}return a}function E(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((function(e){return!!e})).join(" ")}var O=(0,a.memo)((function(e){var n=e.className,t=e.columns,i=e.rows,c=e.idKey,l=Object(a.useState)(),u=Object(o.a)(l,2),s=u[0],v=u[1],m=Object(a.useState)(1),d=Object(o.a)(m,2),f=d[0],p=d[1],g=function(e,n){var t=function(e){return e.map((function(e,n){return[e,n]}))};if(e){var a,r=e.compare;if("string"===typeof r){var i=r;a=function(e,t){var a=Object(o.a)(e,1)[0],r=Object(o.a)(t,1)[0];return n*(Number(a[i]>r[i])-Number(a[i]<r[i]))}}else{var c=r;a=function(e,t){var a=Object(o.a)(e,1)[0],r=Object(o.a)(t,1)[0];return n*c(a,r)}}t=function(e){return e.map((function(e,n){return[e,n]})).sort(a)}}return t}(s,f);return r.a.createElement("table",{className:E(h.a.table,n)},r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,n){return r.a.createElement("td",{className:e===s?h.a.activeColumnHeading:"",key:n,onClick:function(){return function(e){e.compare&&(v(s!==e||1===f?e:void 0),p(s===e?-1:1))}(e)}},"string"===typeof e.heading||void 0===e.heading?e.heading:r.a.createElement(e.heading,null))})))),r.a.createElement("tbody",{className:h.a.tableBody},g(i).map((function(e){var n=Object(o.a)(e,2),a=n[0],i=n[1];return r.a.createElement("tr",{key:y(a,c,i)},t.map((function(e,n){var t=e.cell,i=e.cellClassName;return r.a.createElement("td",{key:n,className:i},function(){if("string"===typeof t)return String(a[t]);var e=t;return r.a.createElement(e,{row:a})}())})))}))))})),j=t(23),_=t.n(j);function k(e){var n=e.children,t=e.className,a=e.disabled,i=e.onClick,c=e.type,o=void 0===c?"button":c;return r.a.createElement("button",{className:E(_.a.button,"string"===typeof t&&t),disabled:a,onClick:i,type:o},n)}var C=t(16),N=t.n(C);function x(e){var n=Object.assign({},e),t="string"===typeof n.className?n.className:"";return r.a.createElement("div",{className:N.a.container},r.a.createElement("input",Object.assign({},n,{className:E(N.a.input,t)})))}var w=t(6),S=t(17),P=t.n(S),I=Object(a.memo)((function(e){var n=e.activeClassName,t=e.children,a=e.className,i=e.to;return r.a.createElement(w.a,{getProps:function(e){var t=e.isCurrent;return{className:E(P.a.link,a,t&&P.a.activeLink,t&&n)}},to:i},t)})),L=t(12),D=t.n(L);var T=Object(a.memo)((function(e){var n=e.className,t=e.children,a=e.defaultValue,i=e.name,c=e.onChange,o=e.value;return r.a.createElement("label",{className:D.a.container},r.a.createElement("span",{className:D.a.labelText},t),r.a.createElement("textarea",{className:E(D.a.textarea,n),defaultValue:a,rows:4,name:i,onChange:c?function(e){c(e.target.value)}:void 0,value:o}))})),q=t(25),A=t.n(q);function B(e){var n=e.children;return r.a.createElement("div",{className:A.a.themeProvider},n)}var F=["DKK","EUR","NOK","SEK","TWD","USD"];function M(e,n){return new Intl.NumberFormat(void 0,{currency:n,style:"currency"}).format(e)}var K=Object(a.memo)((function(e){var n=e.currency,t=e.onChange,a=p();return r.a.createElement("div",null,a("invoicing/choose currency")+" ",F.map((function(e){return r.a.createElement(k,{disabled:e===n,key:e,onClick:t?function(){return t(e)}:void 0},e)})))})),U=t(18),V=t.n(U),J=t(26),R=t.n(J);function W(e){var n=e.className,t=p();return r.a.createElement("header",{className:E(V.a.header,n)},r.a.createElement("img",{src:R.a,className:V.a.logo,alt:t("logo")}),r.a.createElement("h1",null,t("invoicing/app name")))}var Y=t(4),G=t(14),H=t(27),Q=t.n(H),X={description:"",quantity:1,unitPrice:0};var z=Object(a.memo)((function(e){var n=e.existingLineItems,t=e.onChange,i=Object(a.useState)((function(){return Object(G.a)(n||[])})),c=Object(o.a)(i,2),l=c[0],u=c[1],s=Object(a.useState)({}),v=Object(o.a)(s,1)[0];v.onDelete=Object(a.useCallback)((function(e){var n=l.filter((function(n){return n!==e}));u(n),t&&t(n)}),[l,t]),v.onChange=Object(a.useCallback)((function(e,n,a){var r=Object(Y.a)({},a);"description"===e?r[e]=n:"quantity"!==e&&"unitPrice"!==e||(r[e]=Number(n));var i=Object(G.a)(l);a===X?i.push(r):i.splice(i.indexOf(a),1,r),u(i),t&&t(i)}),[l,t]);var m=Object(a.useState)((function(){return function(e){return[{cell:function(n){var t=n.row;return r.a.createElement(x,{type:"text",onChange:function(n){var a=n.target;e.onChange("description",a.value,t)},value:t.description})},compare:"description",heading:function(){return r.a.createElement(g,{label:"invoicing/item description"})}},{cell:function(n){var t=n.row;return r.a.createElement(x,{type:"number",onChange:function(n){var a=n.target;e.onChange("quantity",a.value,t)},value:t.quantity})},heading:function(){return r.a.createElement(g,{label:"quantity"})}},{cell:function(n){var t=n.row;return r.a.createElement(x,{type:"number",step:"0.01",onChange:function(n){var a=n.target;e.onChange("unitPrice",a.value,t)},value:t.unitPrice})},heading:function(){return r.a.createElement(g,{label:"invoicing/price per item"})}},{cell:function(n){var t=n.row;return r.a.createElement(k,{disabled:t===X,onClick:function(){return e.onDelete(t)}},r.a.createElement("span",{"aria-label":"Delete",role:"img"},"\u274c"))}}]}(v)})),d=Object(o.a)(m,1)[0];return r.a.createElement(O,{className:Q.a.table,columns:d,rows:[].concat(Object(G.a)(l),[X])})})),Z=t(28),$=t.n(Z);var ee=Object(a.memo)((function(e){var n=e.existingInvoice,t=e.onCreate,i=e.onSaveChanges,c=p(),l=Object(a.useState)((null===n||void 0===n?void 0:n.currency)||"SEK"),u=Object(o.a)(l,2),s=u[0],v=u[1],m=Object(a.useState)((null===n||void 0===n?void 0:n.dueDate)||""),d=Object(o.a)(m,2),f=d[0],g=d[1],b=Object(a.useState)((null===n||void 0===n?void 0:n.emailAddress)||""),h=Object(o.a)(b,2),y=h[0],E=h[1],O=Object(a.useState)((null===n||void 0===n?void 0:n.lineItems)||[]),j=Object(o.a)(O,2),_=j[0],C=j[1],N=Object(a.useState)((null===n||void 0===n?void 0:n.notes)||""),w=Object(o.a)(N,2),S=w[0],P=w[1],I=Object(a.useState)(Boolean(null===n||void 0===n?void 0:n.paid)),L=Object(o.a)(I,2),D=L[0],q=L[1],A=Object(a.useState)((null===n||void 0===n?void 0:n.title)||""),B=Object(o.a)(A,2),F=B[0],U=B[1],V=Object(a.useMemo)((function(){return(_||[]).reduce((function(e,n){return e+n.quantity*n.unitPrice}),0)}),[_]),J=Object(a.useCallback)((function(e){e.preventDefault();var a={currency:s,dueDate:f,emailAddress:y,lineItems:_,notes:S,paid:D,title:F};n?i&&i(Object(Y.a)({id:n.id},a)):t&&t(a)}),[s,f,y,n,_,S,t,i,D,F]),R=Object(a.useCallback)((function(){globalThis.alert(c("invoicing/email sent to")+y)}),[y,c]);return r.a.createElement("section",{className:$.a.container},r.a.createElement("form",{onSubmit:J},r.a.createElement("p",null,r.a.createElement(k,{type:"submit"},c(n?"invoicing/save changes":"invoicing/create invoice")),r.a.createElement(k,{disabled:!y,onClick:R},c("invoicing/email invoice"))," "+c("invoicing/total")+": "+M(V,s)+" ",r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:D,onChange:function(e){q(e.target.checked)}}),c("invoicing/paid"))),r.a.createElement(x,{type:"text",placeholder:c("invoicing/title"),value:F,onChange:function(e){U(e.target.value)},required:!0}),r.a.createElement(x,{type:"email",placeholder:c("invoicing/email to"),value:y,onChange:function(e){E(e.target.value)}}),r.a.createElement(x,{type:"date",title:c("invoicing/due date"),value:f,onChange:function(e){g(e.target.value)},required:!0}),r.a.createElement(T,{value:S,onChange:P},c("invoicing/notes")),r.a.createElement(K,{currency:s,onChange:v}),r.a.createElement(z,{existingLineItems:null===n||void 0===n?void 0:n.lineItems,onChange:C})))})),ne=t(9),te=t.n(ne);var ae=[{cell:function(e){var n=e.row.paid;return r.a.createElement(g,{label:n?"yes":"no"})},compare:"paid",heading:function(){return r.a.createElement(g,{label:"invoicing/paid"})}},{cell:"title",compare:"title",heading:function(){return r.a.createElement(g,{label:"invoicing/title"})}},{cell:"emailAddress",compare:"emailAddress",heading:function(){return r.a.createElement(g,{label:"invoicing/email to"})}},{cell:function(e){var n=e.row,t=n.dueDate,a=!n.paid&&new Date(t).getTime()>=Date.now();return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("span",{"aria-label":"Overdue ",role:"img"},"\u26a0\ufe0f"),t)},compare:"dueDate",heading:function(){return r.a.createElement(g,{label:"invoicing/due date"})}},{cell:function(e){var n=e.row,t=n.currency,a=n.lineItems.reduce((function(e,n){return e+n.quantity*n.unitPrice}),0);return r.a.createElement(r.a.Fragment,null,M(a,t))},compare:"currency",heading:function(){return r.a.createElement(g,{label:"invoicing/total"})}},{cell:function(e){var n=e.row.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{className:te.a.controlsLink,to:"edit/"+n},r.a.createElement(g,{label:"edit"})))},cellClassName:te.a.controlsCell}];var re=Object(a.memo)((function(e){var n=e.invoices;return r.a.createElement("div",{className:te.a.container},r.a.createElement(O,{className:te.a.table,columns:ae,rows:n,idKey:"id"}))}));var ie=t(2),ce=t.n(ie),oe=t(3),le={invoices:[{currency:"SEK",dueDate:"2020-10-20",emailAddress:"julia@example.com",id:451,lineItems:[{description:"Potatoes",quantity:100,unitPrice:2.5}],notes:"Julia bought 100 potatoes. Time to pay.",paid:!1,title:"Purchase of 100 potatoes"},{currency:"EUR",dueDate:"2020-04-12",emailAddress:"marko@example.com",id:123,lineItems:[{description:"Car, Volvo",quantity:1,unitPrice:25e4},{description:"Router, MikroTik",quantity:2,unitPrice:12012}],notes:"I should probably write payment instructions here...",paid:!1,title:"Car & Router"}],modelVersion:1,nextId:20380451};function ue(){var e=localStorage.getItem("invoicing"),n=e?JSON.parse(e):null;return n&&1===n.modelVersion?n:le}function se(e){localStorage.setItem("invoicing",JSON.stringify(e))}function ve(e){return me.apply(this,arguments)}function me(){return(me=Object(oe.a)(ce.a.mark((function e(n){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue()[n]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,n){return fe.apply(this,arguments)}function fe(){return(fe=Object(oe.a)(ce.a.mark((function e(n,t){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ue()[n].find((function(e){return e.id===t}))){e.next=3;break}throw new Error("Item not found");case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,n){return ge.apply(this,arguments)}function ge(){return(ge=Object(oe.a)(ce.a.mark((function e(n,t){var a,r;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ue(),r=Object(Y.a)(Object(Y.a)({},t),{},{id:a.nextId++}),a[n].push(r),se(a),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,n){return he.apply(this,arguments)}function he(){return(he=Object(oe.a)(ce.a.mark((function e(n,t){var a,r,i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ue(),r=a[n],i=r.find((function(e){return e.id===t.id}))){e.next=5;break}throw new Error("Item not found");case 5:return Object.assign(i,t),se(a),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(oe.a)(ce.a.mark((function e(n){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("invoices",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(oe.a)(ce.a.mark((function e(){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ve("invoices"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=Object(oe.a)(ce.a.mark((function e(n){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe("invoices",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=Object(oe.a)(ce.a.mark((function e(n){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",be("invoices",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=t(10),Ce=t.n(ke);var Ne=[{Component:function(e){var n=p();return r.a.createElement("div",null,n("invoicing/page not found"))},defaultRoute:!0,routingPath:"404"},{Component:function(e){var n=Ce()(Ee,[]),t=Object(o.a)(n,2),a=t[0],i=t[1];return i?r.a.createElement(r.a.Fragment,null,""+i):r.a.createElement(re,{invoices:a||[]})},navMenuLabel:"invoicing/invoices",navMenuLinkPath:"/",routingPath:"/"},{Component:function(e){var n=Object(a.useState)(),t=Object(o.a)(n,2),i=t[0],c=t[1],l=Object(a.useState)(!1),u=Object(o.a)(l,2),s=u[0],v=u[1],m=Object(a.useCallback)((function(e){v(!0),function(e){return je.apply(this,arguments)}(e).then((function(){xe("/")})).catch((function(e){c(String(e))}))}),[]);return i?r.a.createElement(r.a.Fragment,null,i):s?r.a.createElement(g,{label:"saving changes"}):r.a.createElement(ee,{onCreate:m})},navMenuLabel:"invoicing/create invoice",navMenuLinkPath:"/create",routingPath:"/create"},{Component:function(e){var n=e.invoiceId,t=Number(n),i=Ce()((function(){return function(e){return ye.apply(this,arguments)}(t)}),[t]),c=Object(o.a)(i,2),l=c[0],u=c[1],s=Object(a.useState)(),v=Object(o.a)(s,2),m=v[0],d=v[1],f=Object(a.useState)(!1),p=Object(o.a)(f,2),b=p[0],h=p[1],y=Object(a.useCallback)((function(e){h(!0),function(e){return _e.apply(this,arguments)}(e).then((function(){xe("/")})).catch((function(e){d(String(e))}))}),[]);return u||m?r.a.createElement(r.a.Fragment,null,String(u||m)):!l||b?r.a.createElement(g,{label:"loading"}):u?r.a.createElement(r.a.Fragment,null,""+u):r.a.createElement(ee,{existingInvoice:l,onSaveChanges:y})},routingPath:"/edit/:invoiceId"}];function xe(e){Object(w.c)(e.startsWith("/")?"/invoices"+e:e)}var we=t(29),Se=t.n(we);var Pe=Object(a.memo)((function(e){var n=e.className;return r.a.createElement("main",{className:E(Se.a.main,n)},r.a.createElement(w.b,{basepath:"/invoices"},Ne.map((function(e,n){var t=e.Component,a=e.defaultRoute,i=e.routingPath;return r.a.createElement(t,{key:n,default:a,path:i})}))))})),Ie=t(13),Le=t.n(Ie);var De=Object(a.memo)((function(e){var n=e.className,t=p();return r.a.createElement("nav",{className:E(Le.a.menu,n)},r.a.createElement("ul",null,Ne.map((function(e,n){var a=e.navMenuLabel,i=e.navMenuLinkPath;return a&&i&&r.a.createElement("li",{key:n},r.a.createElement(I,{activeClassName:Le.a.activeLink,className:Le.a.link,to:"/invoices"+i},t(a)))}))))})),Te=t(19),qe=t.n(Te);var Ae=function(){return r.a.createElement(f,null,r.a.createElement(B,null,r.a.createElement("div",{className:qe.a.app},r.a.createElement("div",{className:qe.a.headerAndMenu},r.a.createElement(W,null),r.a.createElement(De,null)),r.a.createElement(Pe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(42);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[30,1,2]]]);
//# sourceMappingURL=main.43d49041.chunk.js.map